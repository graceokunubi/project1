<html>

    <head> 
        <title> Donald Trump 2020 Approval Ratings by Pollster </title>
        <script src="https://d3js.org/d3.v6.min.js"></script>
    </head>

    <script>

        d3.json("./approval_polllist.json", d3.autoType)
            .then( (data) => { 
                
                console.log(data); 

                //string date format 1/23/2017
                const dateParser = d3.timeParse("%m/%d/%Y");
                data.forEach( d => {
                    d['createddate'] = dateParser(d["createddate"]); 
                    d['enddate'] = dateParser(d["enddate"]); //we can use this date as the proxy date for the visualization
                    d['modeldate'] = dateParser(d["modeldate"]); //seems to be date when data model created; probably irrelevant 
                    d['startdate'] = dateParser(d["startdate"]);
                });

                data = data.filter( (d) => {return (d['enddate'] >= new Date("1/1/2020")) && (d['enddate'] < new Date("1/1/2021")) ;}  );
                data.sort( (a,b) => d3.ascending(a['enddate'], b['enddate'])); 
                
                console.log(data);

            

        }); 

    </script>

</html>